/*!
 * froala_editor v3.2.1 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2020 Froala Labs
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("froala-editor")):"function"==typeof define&&define.amd?define(["froala-editor"],t):t(e.FroalaEditor)}(this,function(e){"use strict";(e=e&&e.hasOwnProperty("default")?e.default:e).PLUGINS.fullscreen=function(e){var t,r,o,s,n=e.$,i=function(){return e.$box.hasClass("fr-fullscreen")};function a(){if(e.helpers.isIOS()&&e.core.hasFocus())return e.$el.blur(),setTimeout(f,250),!1;t=e.helpers.scrollTop(),e.$box.toggleClass("fr-fullscreen"),n("body").first().toggleClass("fr-fullscreen"),e.helpers.isMobile()&&(e.$tb.data("parent",e.$tb.parent()),e.$box.prepend(e.$tb),e.$tb.data("sticky-dummy")&&e.$tb.after(e.$tb.data("sticky-dummy"))),r=e.opts.height,o=e.opts.heightMax,s=e.opts.z_index,e.opts.height=e.o_win.innerHeight-(e.opts.toolbarInline?0:e.$tb.outerHeight()+(e.$second_tb?e.$second_tb.outerHeight():0)),e.opts.zIndex=2147483641,e.opts.heightMax=null,e.size.refresh(),e.opts.toolbarInline&&e.toolbar.showInline();for(var i=e.$box.parent();!i.first().is("body");)i.addClass("fr-fullscreen-wrapper"),i=i.parent();e.opts.toolbarContainer&&e.$box.prepend(e.$tb),e.events.trigger("charCounter.update"),e.events.trigger("codeView.update"),e.$win.trigger("scroll")}function l(){if(e.helpers.isIOS()&&e.core.hasFocus())return e.$el.blur(),setTimeout(f,250),!1;e.$box.toggleClass("fr-fullscreen"),n("body").first().toggleClass("fr-fullscreen"),e.$tb.data("parent")&&e.$tb.data("parent").prepend(e.$tb),e.$tb.data("sticky-dummy")&&e.$tb.after(e.$tb.data("sticky-dummy")),e.opts.height=r,e.opts.heightMax=o,e.opts.zIndex=s,e.size.refresh(),n(e.o_win).scrollTop(t),e.opts.toolbarInline&&e.toolbar.showInline(),e.events.trigger("charCounter.update"),e.opts.toolbarSticky&&e.opts.toolbarStickyOffset&&(e.opts.toolbarBottom?e.$tb.css("bottom",e.opts.toolbarStickyOffset).data("bottom",e.opts.toolbarStickyOffset):e.$tb.css("top",e.opts.toolbarStickyOffset).data("top",e.opts.toolbarStickyOffset));for(var i=e.$box.parent();!i.first().is("body");)i.removeClass("fr-fullscreen-wrapper"),i=i.parent();e.opts.toolbarContainer&&n(e.opts.toolbarContainer).append(e.$tb),n(e.o_win).trigger("scroll"),e.events.trigger("codeView.update")}function f(){i()?l():a(),c(e.$tb.find('.fr-command[data-cmd="fullscreen"]'));var t=e.$tb.find('.fr-command[data-cmd="moreText"]'),r=e.$tb.find('.fr-command[data-cmd="moreParagraph"]'),o=e.$tb.find('.fr-command[data-cmd="moreRich"]'),s=e.$tb.find('.fr-command[data-cmd="moreMisc"]');t.length&&e.refresh.moreText(t),r.length&&e.refresh.moreParagraph(r),o.length&&e.refresh.moreRich(o),s.length&&e.refresh.moreMisc(s)}function c(t){var r=i();t.toggleClass("fr-active",r).attr("aria-pressed",r),t.find("> *").not(".fr-sr-only").remove(),t.prepend(r?e.icon.create("fullscreenCompress"):e.icon.create("fullscreen"))}return{_init:function(){if(!e.$wp)return!1;e.events.$on(n(e.o_win),"resize",function(){i()&&(l(),a())}),e.events.on("toolbar.hide",function(){if(i()&&e.helpers.isMobile())return!1}),e.events.on("position.refresh",function(){if(e.helpers.isIOS())return!i()}),e.events.on("destroy",function(){i()&&l()},!0)},toggle:f,refresh:c,isActive:i}},e.RegisterCommand("fullscreen",{title:"Fullscreen",undo:!1,focus:!1,accessibilityFocus:!0,forcedRefresh:!0,toggle:!0,callback:function(){this.fullscreen.toggle()},refresh:function(e){this.fullscreen.refresh(e)},plugin:"fullscreen"}),e.DefineIcon("fullscreen",{NAME:"expand",SVG_KEY:"fullscreen"}),e.DefineIcon("fullscreenCompress",{NAME:"compress",SVG_KEY:"exitFullscreen"})});
